(()=>{var e=1e4,t=document.querySelector(".update-characters"),c=document.querySelector("#post-save");ClassicEditor.create(document.querySelector("#editor"),{ckfinder:{uploadUrl:appUrl+"/ckfinder/connector?command=QuickUpload&type=Images&responseType=json"},wordCount:{onUpdate:function(r){var o=r.characters>e,n=!o&&r.characters>8e3;t.textContent="文章總字數：".concat(r.characters," / ").concat(e),t.classList.toggle("characters-limit-close",n),t.classList.toggle("characters-limit-exceeded",o),c.toggleAttribute("disabled",o)}}}).then((function(e){window.editor=e})).catch((function(e){console.error(e.stack)}));var r=!1;document.getElementById("post-save").addEventListener("click",(function(){r=!0})),window.addEventListener("beforeunload",(function(e){r||(e.preventDefault(),e.returnValue="")}))})();