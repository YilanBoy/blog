(()=>{function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=1e4,n=document.querySelectorAll(".update-post-characters"),r=document.getElementsByClassName("save-post"),o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.loader=e}var n,r,o;return n=t,(r=[{key:"upload",value:function(){var e=this;return this.loader.file.then((function(t){return new Promise((function(n,r){e._initRequest(),e._initListeners(n,r,t),e._sendRequest(t)}))}))}},{key:"abort",value:function(){this.xhr&&this.xhr.abort()}},{key:"_initRequest",value:function(){var e=this.xhr=new XMLHttpRequest;e.open("POST","/images/upload",!0),e.setRequestHeader("x-csrf-token",document.querySelector('meta[name="csrf-token"]').content),e.responseType="json"}},{key:"_initListeners",value:function(e,t,n){var r=this.xhr,o=this.loader,a="Couldn't upload file: ".concat(n.name,".");r.addEventListener("error",(function(){return t(a)})),r.addEventListener("abort",(function(){return t()})),r.addEventListener("load",(function(){var n=r.response;if(!n||n.error)return t(n&&n.error?n.error.message:a);e({default:n.url})})),r.upload&&r.upload.addEventListener("progress",(function(e){e.lengthComputable&&(o.uploadTotal=e.total,o.uploaded=e.loaded)}))}},{key:"_sendRequest",value:function(e){var t=new FormData;t.append("upload",e),this.xhr.send(t)}}])&&e(n.prototype,r),o&&e(n,o),t}();ClassicEditor.create(document.querySelector("#editor"),{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new o(e)}}],wordCount:{onUpdate:function(e){var o=e.characters>t,a=!o&&e.characters>8e3;n.forEach((function(n){n.textContent="".concat(e.characters," / ").concat(t),n.classList.toggle("text-yellow-500",a),n.classList.toggle("text-red-500",o)})),Array.prototype.forEach.call(r,(function(e){e.toggleAttribute("disabled",o)}))}}}).then((function(e){window.editor=e})).catch((function(e){console.error(e.stack)}));var a=!1;Array.prototype.forEach.call(r,(function(e){e.addEventListener("click",(function(){a=!0}))})),window.addEventListener("beforeunload",(function(e){a||(e.preventDefault(),e.returnValue="")}))})();